<!DOCTYPE html>
<html>
	<head>
	  <title>Deaths in Police Custody</title>
	  
	 
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <script src="http://isotope.metafizzy.co/isotope.pkgd.min.js"></script>
    
    
   
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1-rc2/jquery.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=News+Cycle:400,700|Oswald' rel='stylesheet' type='text/css'>


    
    
    
    
    <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
     <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
	  <%= csrf_meta_tags %>

	</head>
	<body>

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
    
<%= link_to "Deaths in Police Custody Database", "/", class: "navbar-brand" %>



      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
  
      
       
            
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li><%= link_to "About", about_url %></li>

        
          </ul>
        </li>
      </ul>
      
      
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

    
      

   
  
	<%= yield %>


  


 <script>
// init


$( function() {


  // quick search regex
  var qsRegex;
  
  // init Isotope
  var $container = $('.isotope').isotope({
    itemSelector: 'li',
    layoutMode: 'vertical',
    
  });

  var filterFns = {
    // show if number is greater than 50
    homicide: function() {
      var name = $(this).find('.manner_of_death').text();
      return name.match( /Homicide by law enforcement$/ );
    },
    // show if name ends with -ium
    natural: function() {
      var natural = $(this).find('.manner_of_death').text();
      return natural.match( /^Natural/ );
    },
    delirium: function() {
      var delirium = $(this).find('.manner_of_death').text();
      var delirium = $(this).find('.cause_of_death').text();
      return delirium.match( /^Excited delirium/ );
    },
    accident: function() {
      var accident = $(this).find('.manner_of_death').text();
      return accident.match( /^Accident/ );
    },
    suicide: function() {
      var suicide = $(this).find('.manner_of_death').text();
      return suicide.match( /^Suicide/ );
    }
  };

  console.log(filterFns)

   // bind filter on select change
  $('#filters').on( 'change', function() {
    // get filter value from option value
    var filterValue = this.value;

    // use filterFn if matches value
    filterValue = filterFns[ filterValue ] || filterValue;
    $container.isotope({ filter: filterValue });
  });

  // use value of search field to filter
  var $quicksearch = $('#query').keyup( debounce( function() {
    qsRegex = new RegExp( $quicksearch.val(), 'gi' );
    $container.isotope({filter: function() {
      return qsRegex ? $(this).text().match( qsRegex ) : true;
    }});

  }) );
  
});

// debounce so filtering doesn't happen every millisecond
function debounce( fn, threshold ) {
  var timeout;
  return function debounced() {
    if ( timeout ) {
      clearTimeout( timeout );
    }
    function delayed() {
      fn();
      timeout = null;
    }
    setTimeout( delayed, threshold || 100 );
  }
}

 

</script>



	</body>
  
  
	</html>
